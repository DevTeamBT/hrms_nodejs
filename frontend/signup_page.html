<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
     <link rel="stylesheet" href="./Createuser.css" /> 
     <!-- <link rel = "stylesheet" href="sign.css"> -->
    <!-- <base  href="./Createuser.css" /> -->
    <title>Signup Page</title>
    <!-- <title>Signup Page</title>
        <style>
            body{
                font-family: Arial, Helvetica, sans-serif;
                background-color: white;
            }
            button{
                background-color: #4CAF50;
                width: 25%;
                padding: 15px;
                color: black;
                border: none;
                float: center;
                font-size: 15px;
            }
            label{
                font-size: 20px;
            }
            form{
                border: 3px solid #f1f1f1;
            }
            input[type=email],input[type=text]{
                width: 50%;
                font-size: 15px;
                margin: 8px 0px;
                padding: 12px 20px;
                display: inline-block;
                border: 2px solid green;
                box-sizing: border-box;
            }
            input[type=radio]{
                height: 18px;
                width: 18px;
            }
            button:hover{
                opacity:0.7;

            }
            .container{
                padding: 50px;
                background-color: white;
            }
            .imgcontainer {
                text-align: center;
                margin: 24px 0 12px 0;
            }
              
            img.avatar {
                width: 10%;
                border-radius: 50%;
            }  
        </style> -->
  
           <!-- <script src = '/app.js'></script> -->
          <!-- <script src = '/link.js'></script> -->


      </head>
  <body>
    <nav class="flex-column">
      <div id="main">
        <button class="openbtn" onclick="toggleNav()">â˜°</button>
      </div>
      <img
        class="image"
        src="https://bodhtree.com/wp-content/uploads/2016/02/logo-sticky.png"
      />
      <a class="nav-link" href="#">Home</a>
      <span class="nav-link">
        Admin
        <span id="subitems">
          <ul>
            <li><a href=".html">Hr</a></li>
            <li><a href=".html">Sales</a></li>
            <li><a href=".html">Recruting</a></li>
          </ul>
        </span>
      </span>
      <a class="nav-link" href="#">Tickets</a>
      <a class="nav-link" href="#">Forums</a>
      <a class="nav-link" href="#">Contacts</a>
      <div class="login">
        <h5>Profile</h5>
        <img src="../images/avatar_img1.jpg" alt="propic" />
        <button type="button" id="logoutButton" class="btn btn-dark">Log Out</button>
      </div>
    </nav>
    <div class="container">
      <h4>Add Employee</h4>
      <form action="/api/users" method="POST" onsubmit="createEmployee(event)">
        <!-- {% csrf_token %} {% load static %} -->

        <div class="mb-3 row">
          <div class="col-sm-5">
            <input
              type="text"
              class="form-control"
              placeholder="full name"
              name="full_name"
              required
            />
          </div>
          <div class="col-sm-5">
            <select class="form-select" name="reportsTo">
              <option value="">Select Reports</option>
              <option value="report1">Anil</option>
              <option value="report2">Prashanth</option>
              <option value="report3">Pruthvi</option>
              <option value="report4">Swapna</option>
              <option value="report5">Venkat</option>
              <option value="report6">Naga Sudha</option>
              <option value="report7">Thulasi</option>
              <option value="report8">Nirvigna</option>
              <option value="report9">Shishir</option>
            </select>
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-5">
            <input
              type="text"
              class="form-control"
              id="designation"
              placeholder="Designation"
            />
          </div>
          <div class="col-sm-5">
            <select class="form-select" name="department">
              <option value="">Select Department</option>
              <option value="department1">Department1</option>
              <option value="department2">Department2</option>
              <option value="department3">Department3</option>
              <option value="department4">Department4</option>
            </select>
          </div>
        </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
          <select class="form-select" name="bloodGroup">
            <option value="">Blood Group</option>
            <option value="1">A+</option>
            <option value="2">B-</option>
            <option value="3">A-</option>
            <option value="4">B+</option>
            <option value="5">O+</option>
            <option value="6">O-</option>
            <option value="7">AB-</option>
            <option value="8">AB+</option>
          </select>
        </div>
          <div class="col-sm-5">
            <input
              type="date"
              class="form-control"
              placeholder="Date of Joining"
              name="date_of_joining"
              required
            />
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-5">
            <select class="form-select" name="workType">
              <option value="">Select WorkType</option>
              <option value="type1">Type1</option>
              <option value="type2">Type2</option>
              <option value="type3">Type3</option>
              <option value="type4">Type4</option>
            </select>
          </div>
          <div class="col-sm-5">
            <input
              type="number"
              class="form-control"
              placeholder="Annual_ctc"
              name="annual_ctc"
              required
            />
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-5">
            <input
              type="email"
              class="form-control"
              placeholder="Office Email"
              name="email"
              required
            />
          </div>
          <div class="col-sm-5">
            <select class="form-select" name="workLocation">
              <option value="">Work Location</option>
              <option value="workLocation1">India</option>
              <option value="workLocation2">US</option>
              <!-- <option value="workLocation3">L3</option>
              <option value="workLocation4">L4</option> -->
            </select>
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-5">
            <input
              type="number"
              class="form-control"
              placeholder="Mobile No"
              name="mobile"
              required
            />
          </div>
          <div class="col-sm-5">
            <input
              type="email"
              class="form-control"
              placeholder="Personal_Email"
              name="personal_email"
              required
            />
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-5">
            <select class="form-select" name="gender">
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="transgender">Transgender</option>
            </select>
          </div>
          <div class="col-sm-5">
            <select class="form-select" name="state">
              <option value="">Select State</option>
              <option value="ap">Andhrapradesh</option>
 
              <option value="Arunachal">Arunachal Pradesh</option>
 
              <option value="assam">Assam</option>
 
              <option value="Bihar">Bihar</option>
 
              <option value="Chattisgarh">Chattisgarh</option>
 
              <option value="Goa">Goa</option>
 
              <option value="Gujarat">Gujarat</option>
 
              <option value="Haryana">Haryana</option>
 
              <option value="Himachal Pradesh">Himachal Pradesh</option>
 
              <option value="Jharkhand">Jharkhand</option>
 
              <option value="Karnataka">Karnataka</option>
 
              <option value="Kerala">Kerala</option>
 
              <option value="Madhya Pradesh">Madhya Pradesh</option>
 
              <option value="Maharashtra">Maharashtra</option>
 
              <option value="Manipur">Manipur</option>
 
              <option value="Meghalaya">Meghalaya</option>
 
              <option value="Mizoram">Mizoram</option>
 
              <option value="Nagaland">Nagaland</option>
 
              <option value="Odisha">Odisha</option>
 
              <option value="Punjab">Punjab</option>
 
              <option value="Rajasthan">Rajasthan</option>
 
              <option value="Sikkim">Sikkim</option>
 
              <option value="TamilNadu">TamilNadu</option>
 
              <option value="Telangana">Telangana</option>
 
              <option value="Tripura">Tripura</option>
 
              <option value="Uttarakhand">Uttarakhand</option>
 
              <option value="Uttarpradesh">Uttarpradesh</option>
 
              <option value="WestBengal">WestBengal</option>
            </select>
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-5">
            <input
              type="number"
              class="form-control"
              placeholder="Enter code"
              name="emp_code"
              required
            />
          </div>
          <div class="col-sm-5">
            <input
              type="text"
              class="form-control"
              placeholder="Enter Password"
              name="password"
              required
            />
            <br>
          </div>
          <div class="mb-3 row">
            <div class="col-sm-5">
              <select class="form-select" name="role">
                <option value="">Select Role</option>
                <option value="admin">Admin</option>
                <option value="employee">Employee</option>
              </select>
            </div>
            <div class="col-sm-5">
              <h5>Profile</h5>
              <input type="file" name="profile_image" id="profilePicInput" accept="image/*">
              <img id="profilePicPreview" src="../images/avatar_img1.jpg" alt="Profile Picture">
            </div>
        </div>
        <!-- <label for="password"><b>Password : </b></label>
        <input
          type="text"
          placeholder="Enter Password"
          name="password"
          required
        /> -->
        <div class="mt-3 buttons">
          <button type="submit" class="btn btn-primary col-sm-2" >Create</button>
          <a href='/dashboard' class="btn btn-secondary col-sm-2">Cancel</a>
          <!-- <button type="button" class="btn btn-secondary col-sm-2">
            Cancel
          </button> -->
        </div>
      </form>
    </div>
    <div id = 'userList'></div>
    <script>
      var sidebarOpen = true;
      function toggleNav() {
        var sidebar = document.querySelector(".flex-column");
        if (sidebarOpen) {
          sidebar.style.width = "0";
          sidebar.style.padding = "0";
        } else {
          sidebar.style.width = "15%";
          sidebar.style.padding = "30px";
        }
        sidebarOpen = !sidebarOpen;
      }

      document.getElementById('logoutButton').addEventListener('click', function () {
            logout();
        });

        function logout() {
            sessionStorage.clear();
            window.history.replaceState({}, 'login', '/login');
            window.location.href = './login';
        }
    </script>
  
  
    <!-- <center><h1>Register From</h1></center>
    <form action="#" method="post">
      {% csrf_token %} {% load static %}
      <center>
        <div class="container">
          <div class="imgcontainer">
            <img
              src="{% static 'avatar_img2.png' %}"
              alt="Avatar"
              class="avatar"
            />
          </div>
          <label for="first_name"><b>First Name : </b></label>
          <input
            type="text"
            placeholder="Enter your first name"
            name="first_name"
            required
          /><br />
          <label for="last_name"><b>Last Name :</b></label>
          <input
            type="text"
            placeholder="Enter your last name"
            name="last_name"
            required
          /><br />
          <label for="sex"><b>Sex : </b></label>
          <input type="radio" name="sex" value="male" required />
          <label><b>Male</b></label>
          <input type="radio" name="sex" value="female" required />
          <label><b>Female</b></label
          ><br />
          <label for="email"><b>Email Id : </b></label>
          <input
            type="email"
            placeholder="Enter email"
            name="email"
            float="right"
            required
          /><br />
          <label for="password"><b>Password : </b></label>
          <input
            type="text"
            placeholder="Enter Password"
            name="password"
            required
          /><br />
          <button type="submit"><b>Signup</b></button><br />
          Already an accounct <a href="http://localhost:8000/login/"> Login </a>
        </div>
      </center>
    </form> -->
   
    <script>
      async function createEmployee(event) {
        event.preventDefault();
        const form = document.querySelector('form'); // Get the form element

          const fullName = form.elements['full_name'].value;
          const reportsTo = form.elements['reportsTo'].value;
          const designation = form.elements['designation'].value;
          const department = form.elements['department'].value;
          const bloodGroup = form.elements['bloodGroup'].value;
          const dateOfJoining = form.elements['date_of_joining'].value;
          const workType = form.elements['workType'].value;
          const annual_ctc = form.elements['annual_ctc'].value;
          const officeEmail = form.elements['email'].value;
          const workLocation = form.elements['workLocation'].value;
          const mobileNo = form.elements['mobile'].value;
          const personal_Email = form.elements['personal_email'].value;
          const gender = form.elements['gender'].value;
          const native = form.elements['state'].value;
          const enterCode = form.elements['emp_code'].value;
          const enterPassword = form.elements['password'].value;
          const role = form.elements['role'].value ;
          const photo = form.elements["profile_image"].files[0];  
          const probationPeriod = form.elements['password'].value;
          const confirmationDate = form.elements['password'].value;
          const aadharNumber = form.elements['password'].value;
          const emergencyContactNumber = form.elements['password'].value;
          const fathersName = form.elements['password'].value;
          const status = form.elements['password'].value;
          const spouseName = form.elements['password'].value;
          const division = form.elements['password'].value;
          const costCenter = form.elements['password'].value;
          const Grade = form.elements['password'].value;
          const Location = form.elements['password'].value;
          const Shift = form.elements['password'].value;
          const holidayCategory = form.elements['password'].value;
          const panNumber = form.elements['password'].value;
          const pfNumber = form.elements['password'].value;
          const uanNumber = form.elements['password'].value;
          const paymentType = form.elements['password'].value;



          const data = {

              fullName: fullName,
              reportsTo:reportsTo,
              designation: designation,
              department: department,
              bloodGroup: bloodGroup,
              dateOfJoining: dateOfJoining,
              workType: workType,
              annual_ctc: annual_ctc,
              officeEmail: officeEmail,
              workLocation: workLocation,
              mobileNo: mobileNo,
              personal_Email: personal_Email,
              gender: gender,
              native: native,
              enterCode: enterCode,
              enterPassword: enterPassword,
              role: role,
              photo: photo,
              spouseName: spouseName,
              division: division,
              costCenter: costCenter,
              status:status,
              fathersName:fathersName,
              emergencyContactNumber:emergencyContactNumber,
              aadharNumber:aadharNumber,
              confirmationDate:confirmationDate,
              Grade:Grade,
              Location:Location,
              Shift:Shift,
              holidayCategory:holidayCategory,
              panNumber:panNumber,
              uanNumber:uanNumber,
              paymentType:paymentType
            };
          console.log('Data:', data);

          try {
              const response = await fetch('http://localhost:4000/api/users', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data),
              });
              console.log('Response:', response);
              console.log('Data:', data);
              if (response.ok) {
                    const result = await response.json();
                    console.log('Employee created:', result);
                    alert('Employee created successfully!');
                } else {
                    console.error('Error creating employee:', response.status, response.statusText);
                  }
            } catch (error) {
                console.error('Error creating employee:', error);
              }
      }
   
    </script>

<script>
  const profilePicInput = document.getElementById("profilePicInput");
const profilePicPreview = document.getElementById("profilePicPreview");

// Add event listener for file input change
profilePicInput.addEventListener("change", function(event) {
    const file = event.target.files[0]; // Get the selected file

    // Check if a file is selected
    if (file) {
        // Create a FileReader to read the selected file as a Data URL
        const reader = new FileReader();
        
        // Set up the FileReader onload event
        reader.onload = function(event) {
            // Set the preview image source to the Data URL of the selected image
            profilePicPreview.src = event.target.result;
        };
        
        // Read the selected file as a Data URL
        reader.readAsDataURL(file);
    } else {
        // If no file is selected, display the default profile picture
        profilePicPreview.src = "../images/avatar_img1.jpg";
    }
});
</script>
  </body>
</html>
