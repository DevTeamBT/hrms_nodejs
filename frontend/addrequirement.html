

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
   <link rel="stylesheet" href="{% static 'addrequirement.css' %}"> 
  <title>Add Requirement</title> 
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
    <style>
      body{
        display: flex;
    }
    .flex-column {
        background-color: lightgrey;
        padding: 30px;
        width: 15%;
        transition: 0.5s;
    }
    .image{
        margin-bottom: 20px;
        width: 100%;
        padding-bottom: 10%;
    }
    .container{
        width: 80%;
        margin-top: 5%;
    }
    form{
        padding-left: 16%;
    }
    h4{
        margin-bottom: 20px;
        text-align: center;
        padding: 10px;
    }
    .buttons{
        padding-left: 29%;
        padding-top: 20px;
    }
    .login {
        padding-top: 10px;
        display: flex;
        align-items: center;
        position: absolute;
        top: 0;
        right: 0;
        margin: 10px;
    }
    .login img{
        height: 25px;
        width: 25px;
        margin-right: 20px;
    }
    h5{
        margin-top: 14px;
    }
    .nav-link{
        font-size: large;
        font-family: "Lato", sans-serif;
        color: black;
        padding-left: 25%;
        padding-bottom: 20%;
        position: relative;
        display: block;
        overflow: hidden;
    }
    #subitems {
        display: none;
        font-family: Times, serif;
        position: relative;
        padding-left: 10%;
    }
    
    .nav-link:hover #subitems {
        display: block;
    }
    #subitems li a{
        font-size: medium;
        text-decoration: none;
        color: black;
    }
    .openbtn {
        text-decoration: none;
        background-color: black;
        margin-left: 105%;
        font-size: 17px;
        cursor: pointer;
        color: white;
        border-radius: 10px;
      }
      .openbtn:hover {
        background-color: #444;
      }
    </style>
</head>
<body>
  <nav class="flex-column">
    <div id="main">
      <button class="openbtn" onclick="toggleNav()">Hide</button>
  </div>
    <img class="image" src="https://bodhtree.com/wp-content/uploads/2016/02/logo-sticky.png">
    <a class="nav-link" href="#">Home</a>
    <span class="nav-link">
      Admin
      <span id="subitems">
          <ul>
              <li><a href="{% url 'login' %}">Hr</a></li>
              <li><a href="{% url 'login' %}">Sales</a></li>
              <li><a href="{% url 'login' %}">Recruting</a></li>
          </ul>
      </span>
  </span> 
      <a class="nav-link" href="#">Tickets</a>
      <a class="nav-link" href="Forums">Forums</a>
      <a class="nav-link" href="#">Contacts</a>
      <div class="login">
        <h5>Profile <i class="bi-person-fill"></i></h5>
        <img src="{% static 'user.png' %}"> 
        <button type="button" id="logoutButton" class="btn btn-dark">Log Out</button>
    </div>
  </nav>
  <div class="container">
    <h4>Add Requirement</h4>
    <form action="/api/client/req" method="POST" onsubmit="clientReq(event)">
     

      <div class="mb-3 row">
        <div class="col-sm-5">
            <select id="companyDropdown" class="form-select" placeholder="Select Client" name="client" >
                <option value="">Select Client</option>
                <option value="Google">Google</option>
                <option value="Microsoft">Microsoft</option>
                <option value="Apple">Apple</option>
                <option value="Amazon">Amazon</option>
                <option value="IBM">IBM</option>
                <option value="Facebook">Facebook</option>
                <option value="Oracle">Oracle</option>
                <option value="Cisco Systems">Cisco Systems</option>
                <option value="Sony">Sony</option>
                <option value="HP Inc.">HP Inc.</option>
                <option value="Dell Technologies">Dell Technologies</option>
                <option value="Boeing Company">Boeing Company</option>
                <option value="Intel Corporation">Intel Corporation</option>
                <option value="NVIDIA Corporation">NVIDIA Corporation</option>
                <option value="Adobe Systems, Inc.">Adobe Systems, Inc.</option>
                <option value="Accenture">Accenture</option>
                <option value="The Walt Disney Company">The Walt Disney Company</option>
                <option value="Ford Motor Co.">Ford Motor Co.</option>
                <option value="General Motors Company">General Motors Company</option>
                <option value="Mercedes-Benz AG">Mercedes-Benz AG</option>
                <option value="Tesla, Inc.">Tesla, Inc.</option>
                <option value="Alibaba Group Holding Limited">Alibaba Group Holding Limited</option>
                <option value="China Mobile">China Mobile</option>
                <option value="ZTE Corp">ZTE Corp</option>
                <option value="OnePlus">OnePlus</option>
                <option value="Huawei Technologies Co">Huawei Technologies Co</option>
                <option value="Lenovo Group Ltd.">Lenovo Group Ltd.</option>
                <option value="Samsung Electronics">Samsung Electronics</option>
                
              </select>
        </div>
        <div class="col-sm-5">
            <select id="contactDropdown" class="form-select" placeholder="Select Contact" name="contact" >
                <option value="">Select Contact</option>
              </select>
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
          <input type="text" class="form-control" id="req" placeholder="Title for req" name="title_for_req">
        </div>
        <div class="col-sm-5">
            <select class="form-select" placeholder="select priority" name="priority" >
              <option value="">select priority</option>
              <option value="priority1">priority1</option>
              <option value="priority2">priority2</option>
              <option value="priority3">priority3</option>
              <option value="priority4">priority4</option>
            </select>
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
            <select class="form-control" placeholder="select priority" name="skillsets" >
                <option value="">Select SkillSets</option>
                <option value="skillsets1">SkillSets 1</option>
                <option value="skillsets2">SkillSets 2</option>
                <option value="skillsets3">SkillSets 3</option>
            </select>
        </div>
        <div class="col-sm-5">
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
            <input type="text" class="form-control" id="musthave" placeholder="Must Have" name="must_have">
        </div>
        <div class="col-sm-5">
          <input type="text" class="form-control" id="gth" placeholder="Good to have" name="good_to_have" >
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
          <input type="number" class="form-control" id="exp" placeholder="Exp Range Min" name="exp_range_min" >
        </div>
        <div class="col-sm-5">
            <input type="number" class="form-control" id="max" placeholder="Max" name="max" >
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
          <input type="number" class="form-control" id="budget" placeholder="Budget Min" name="budget_min" >
        </div>
        <div class="col-sm-5">
          <input type="number" class="form-control" id="max1" placeholder="Max" name="budget_max">
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
            <input type="number" class="form-control" id="position" placeholder="# of Positions" name="positions" >
        </div>
        <div class="col-sm-5">
            <input type="text" class="form-control" id="location" placeholder="Location" name="location" >
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
            <select class="form-select" placeholder="Select Hire Type" name="hire_type">
                <option value="">Select Hire Type</option>
                <option value="direct">direct</option>
                <option value="indirect">indirect</option>
                <option value="third-party">third-party</option>
              </select>
        </div>
        <div class="col-sm-5">
            <select class="form-select" placeholder="Select Work Type" name="work_type" >
                <option value="">Select Work Type</option>
                <option value="work type1">Full Time </option>
                <option value="work type2">Part Time</option>
              </select>
        </div>
      </div>
      <div class="mb-3 row">
        <div class="col-sm-5">
            <select class="form-select" placeholder="Select Recruiter" name="recruiter" >
                <option value="">Select Recruiter</option>
                <option value="recruiter1">Recruiter1</option>
                <option value="recruiter2">Recruiter2</option>
                <option value="recruiter3">Recruiter3</option>
                <option value="recruiter4">Recruiter4</option>
              </select>
        </div>
        <div class="col-sm-5">
            <select class="form-select" placeholder="Select Account Mgr" name="account_mgr">
                <option value="">Select Account Mgr</option>
                <option value="account mgr1">Account Mgr1</option>
                <option value="account mgr2">Account Mgr2</option>
                <option value="account mgr3">Account Mgr3</option>
                <option value="account mgr4">Account Mgr4</option>
              </select>
        </div>
      </div>
      <div class="mt-3 buttons">
        <button type="submit" class="btn btn-primary col-sm-2">Submit</button>
        <a href="/dashboard" class="btn btn-secondary col-sm-2">Cancel</a>
      </div>
    </form>
  </div>
  <script>
    var sidebarOpen = true;
    function toggleNav() {
        var sidebar = document.querySelector(".flex-column");
        var toggleBtn = document.querySelector(".openbtn");
        if (sidebarOpen) {
            sidebar.style.width = "0";
            sidebar.style.padding = "0";
            toggleBtn.textContent = "Show";
        } else {
            sidebar.style.width = "15%";
            sidebar.style.padding = "30px";
            toggleBtn.textContent = "Hide";
        }
        sidebarOpen = !sidebarOpen;
    }

    var companyDropdown = document.getElementById("companyDropdown");
    var contactDropdown = document.getElementById("contactDropdown");

    companyDropdown.addEventListener("change", function () {
        var selectedClient = companyDropdown.value;
        updateContactDropdown(selectedClient);
    });

    function updateContactDropdown(selectedClient) {
        var contactData = {
            "Google": ["9876543210", "9786543210"],
            "Microsoft": ["9786543210"],
            "Apple": ["9687543210"],
            "Amazon": ["9587643210"],
            "IBM":["9487563210"],
            "Facebook":["9387654210"],
            "Oracle":["9287654310"],
            "Cisco Systems":["9187654320"],
            "Sony":["9987654320"],
            "HP Inc." : ["9887654321"],
            "Dell Technologies" : ["9778654321"],
            "Boeing Company" : ["9668754321"],
            "Intel Corporation":["9558764321"],
            "NVIDIA Corporation":["9448765210"],
            "Adobe Systems, Inc.":[],
            "Accenture":[], 
            "The Walt Disney Company":[],
            "Ford Motor Co.":[],
            "General Motors Company":[],
            "Mercedes-Benz AG":[],
            "Tesla, Inc.":[],
            "Alibaba Group Holding Limited":[],
            "China Mobile":[],
            "ZTE Corp":[],
            "OnePlus":[],
            "Huawei Technologies Co":[],
            "Lenovo Group Ltd.":[],
            "Samsung Electronics":[]
        };

    contactDropdown.innerHTML = "<option value=''>Select Contact</option>";

    if (selectedClient in contactData) {
        var contacts = contactData[selectedClient];
        if (contacts.length > 0) {
            contacts.forEach(function (contact) {
                var option = document.createElement("option");
                option.value = contact;
                option.textContent = contact;
                contactDropdown.appendChild(option);
            });
        } else {
            var option = document.createElement("option");
            option.textContent = "No contact available";
            contactDropdown.appendChild(option);
        }
    }
}




    document.getElementById('logoutButton').addEventListener('click', function () {
      logout();
  });
   
  function logout() {
    sessionStorage.clear();
    window.history.replaceState({}, 'login', '/login');
    window.location.href = '/login';
  }
</script>


<script>
  async function clientReq(event) {
    event.preventDefault();
    const form = document.querySelector('form'); // Get the form element

      const selectClient = form.elements['client'].value;
      const selectContact = form.elements['contact'].value;
      const title = form.elements['title_for_req'].value;
      const priority = form.elements['priority'].value;
      const skillSet = form.elements['skillsets'].value;
      const mustHave = form.elements['must_have'].value;
      const goodToHave = form.elements['good_to_have'].value;
      const rangeMin = form.elements['exp_range_min'].value;
      const rangeMax = form.elements['max'].value;
      const budgetMin = form.elements['budget_min'].value;
      const budgetMax = form.elements['budget_max'].value;
      const noOfPositions = form.elements['positions'].value;
      const location = form.elements['location'].value;
      const hireType = form.elements['hire_type'].value;
      const workType = form.elements['work_type'].value;
      const recruiter = form.elements['recruiter'].value;
      const accManager = form.elements['account_mgr'].value;

      const data = {

        selectClient: selectClient,
        selectContact:selectContact,
        title: title,
        priority: priority,
        skillSet: skillSet,
        mustHave: mustHave,
        goodToHave: goodToHave,
        rangeMin: rangeMin,
        rangeMax: rangeMax,
        budgetMin: budgetMin,
        budgetMax: budgetMax,
        noOfPositions: noOfPositions,
        location: location,
        hireType:hireType,
        workType:workType,
        recruiter:recruiter,
        accManager:accManager,

        };
      console.log('Data:', data);

      try {
          const response = await fetch('http://localhost:4000/api/client/req', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify(data),
          });
          console.log('Response:', response);
          console.log('Data:', data);
          if (response.ok) {
                const result = await response.json();
                console.log('client requirement created:', result);
                alert('Client requirement created successfully!');
            } else {
                console.error('Error client requirement:', response.status, response.statusText);
              }
        } catch (error) {
            console.error('Error client requirement:', error);
          }
  }

</script>



</body>

</html> 