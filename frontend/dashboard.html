<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./dashboard.css" />
    <title>Document</title>
</head>
<body>
    <nav class="flex-column">
        <div id="main">
          <button class="openbtn" onclick="toggleNav()">Hide</button>
      </div>
          <img class="image" src="https://bodhtree.com/wp-content/uploads/2016/02/logo-sticky.png">
          <a class="nav-link" href="#">Home</a>
          <span class="nav-link">
            Admin
            <span id="subitems">
                <ul>
                    <li><a href="{% url 'login' %}">Hr</a></li>
                    <li><a href="{% url 'login' %}">Sales</a></li>
                    <li><a href="{% url 'login' %}">Recruting</a></li>
                </ul>
            </span>
        </span>
              <a class="nav-link" href="#">Tickets</a>
              <a class="nav-link" href="#">Forums</a>
              <a class="nav-link" href="#">Contacts</a>
              <div class="login">
                <h5>Profile</h5>
                <img class="image" src="{% static 'images/user.png' %}" />
                <button type="button" id="logoutButton" class="btn btn-dark">Log Out</button>
              </div>
      </nav>
      <div class="container ">
        <form method="post">
           
        <header>
            <h1>Dashboard</h1>
        </header>
        
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Analytics</a></li>
                <li><a href="#">Settings</a></li>
            </ul>
        </nav>
        
        <div class="card">
            <h2>Section 1</h2>
            <p>This is some content for section 1.</p>
        </div>
        
        <div class="card">
            <h2>Section 2</h2>
            <p>This is some content for section 2.</p>
        </div>
        
        <div class="card">
            <h2>Section 3</h2>
            <p>This is some content for section 3.</p>
        </div>

        <div class="dashboard-links">
            <ul>
                <li><a href="/api/add/client">Add Client</a></li>
                <li><a href="/api/client/contact">Add Client Contacts</a></li>
                <li><a href="/api/client/req">Add Requirement</a></li>
                <li><a href="/api/users">Add Employee</a></li>
                <li><a href="{% url 'teamUpdate' %}">Team Update</a></li>
                <!-- <li><a href="{% url 'addCandidate' %}">Add Candidate</a></li> -->
            </ul>
        </div>
    </form>
          </div>
          
          <script>
            var sidebarOpen = true;
            function toggleNav() {
                var sidebar = document.querySelector(".flex-column");
                var toggleBtn = document.querySelector(".openbtn");
                if (sidebarOpen) {
                    sidebar.style.width = "0";
                    sidebar.style.padding = "0";
                    toggleBtn.textContent = "Show";
                } else {
                    sidebar.style.width = "16%";
                    sidebar.style.padding = "30px";
                    toggleBtn.textContent = "Hide";
      
                }
                sidebarOpen = !sidebarOpen;
            }
            document.getElementById('logoutButton').addEventListener('click', function () {
            logout();
        });

        function logout() {
            sessionStorage.clear();
            window.history.replaceState({}, 'login', '/login');
            window.location.href = '/login';
        }
        </script>


<!-- connect to login page  -->
<script>
    // Clear localStorage on page load
    //localStorage.clear();

    // Replace the current history entry
    window.history.replaceState({}, document.title, window.location.href);

    // Check if the page is being loaded from the Page Cache
    window.addEventListener('pageshow', function (event) {
        if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
            // Clear localStorage if navigating back
            localStorage.clear();
            // Redirect to the login page
            window.location.replace('./login'); 
        }
    });

    // Listen for the popstate event
    window.addEventListener('popstate', function (event) {
        // Clear localStorage and redirect to the login page when navigating back
        localStorage.clear();
        window.location.replace('./login');
    });

    function redirectToCreateUser() {
        window.location.replace('./signup_page.html'); // Adjust the path as needed
    }

</script>

<script>
     try {
              const response = await fetch('http://localhost:4000/dashboard', {
                  method: 'GET',
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data),
              });
            } catch (error) {
                console.error('Error creating employee:', error);
              }
</script>


</body>
</html>